<div class="container">
  <h1>My Appointments</h1>
  <h3 class="name-calendar"><%= current_user.type %> <%= current_user.first_name %></h3>

<% if @appointments.count <= 0  %>
  <div class="alert alert-info" role="alert">
    <strong>Heads up!</strong>You do not have any meetings yet!
  </div>
<% end %>


 <% @appointments.each do |appt| %>
        <% if appt.status == 0 && current_user.type == 'Teacher' %>
          <span>
          <strong><%= link_to "#{appt.student.first_name} #{appt.student.last_name}", student_path(current_user.id) %></strong>

          <%= link_to 'Accept', appointment_path(appt, :response => :accepted), method: :patch, class: "elder-button-mint" %>
          <%= link_to 'Decline', appointment_path(appt, :response => :rejected), method: :patch, class: "elder-button-red" %>
          </span>
        <% elsif appt.status == 0 %>
          <p>You have sent a appointment request to
          <strong><%= link_to "#{appt.teacher.first_name} #{appt.teacher.last_name}", teacher_path(current_user.id)%></strong>.
           Date: <%= appt.start_time.to_formatted_s(:short) %></p>
        <% end %>
        <br>
    <% end %>



      <%= month_calendar events: @appointments do |date, appointments| %>
      <%= date.day %>
        <% appointments.each do |appointment| %>
          <% if current_user.id != appointment.organizer_id %>
            <div>
              <div class="student-hours" data-toggle="tooltip" data-placement="top" title = <%= "#{appointment.start_time.to_s(:time)}"%> >
              <p><%= link_to "#{appointment.organizer.first_name} #{appointment.organizer.last_name} #{appointment.status}", "#" %></p>
            </div>
          <% else %>
            <div class="teacher-hours" data-toggle="tooltip" data-placement="top" title = <%= "#{appointment.start_time.to_s(:time)}"%> >
            <p><%= link_to "#{appointment.guest.first_name} #{appointment.guest.last_name} #{appointment.status}", "#" %></p>
          <% end %>
        <% end %>
      <% end %>
    </div>



